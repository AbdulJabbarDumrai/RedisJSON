



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://rejson.io/performance/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Performance - ReJSON - a JSON data type for Redis</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#performance" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://rejson.io" title="ReJSON - a JSON data type for Redis" class="md-header-nav__button md-logo">
          
            <img src="../images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ReJSON - a JSON data type for Redis
              </span>
              <span class="md-header-nav__topic">
                Performance
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/RedisLabsModules/ReJSON/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      RedisLabsModules/ReJSON
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/logo.svg" width="48" height="48">
      
    </span>
    ReJSON - a JSON data type for Redis
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/RedisLabsModules/ReJSON/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      RedisLabsModules/ReJSON
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Quickstart" class="md-nav__link">
      Quickstart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../path/" title="Path syntax" class="md-nav__link">
      Path syntax
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Performance
      </label>
    
    <a href="./" title="Performance" class="md-nav__link md-nav__link--active">
      Performance
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rejson-baseline" title="ReJSON baseline" class="md-nav__link">
    ReJSON baseline
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-smallish-object" title="A smallish object" class="md-nav__link">
    A smallish object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-bigger-array" title="A bigger array" class="md-nav__link">
    A bigger array
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-largish-object" title="A largish object" class="md-nav__link">
    A largish object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#number-operations" title="Number operations" class="md-nav__link">
    Number operations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#baseline" title="Baseline" class="md-nav__link">
    Baseline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-empty-string" title="The empty string" class="md-nav__link">
    The empty string
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-vs-server-side-lua-scripting" title="Comparison vs. server-side Lua scripting" class="md-nav__link">
    Comparison vs. server-side Lua scripting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-and-getting-the-root" title="Setting and getting the root" class="md-nav__link">
    Setting and getting the root
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-and-getting-parts-of-objects" title="Setting and getting parts of objects" class="md-nav__link">
    Setting and getting parts of objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#even-more-charts" title="Even more charts" class="md-nav__link">
    Even more charts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raw-results" title="Raw results" class="md-nav__link">
    Raw results
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rejson-results" title="ReJSON results" class="md-nav__link">
    ReJSON results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lua-using-cjson" title="Lua using cjson" class="md-nav__link">
    Lua using cjson
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lua-using-cmsgpack" title="Lua using cmsgpack" class="md-nav__link">
    Lua using cmsgpack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ram/" title="RAM usage" class="md-nav__link">
      RAM usage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../developer/" title="Developer notes" class="md-nav__link">
      Developer notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contrib/" title="Contributor agreement" class="md-nav__link">
      Contributor agreement
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rejson-baseline" title="ReJSON baseline" class="md-nav__link">
    ReJSON baseline
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-smallish-object" title="A smallish object" class="md-nav__link">
    A smallish object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-bigger-array" title="A bigger array" class="md-nav__link">
    A bigger array
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-largish-object" title="A largish object" class="md-nav__link">
    A largish object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#number-operations" title="Number operations" class="md-nav__link">
    Number operations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#baseline" title="Baseline" class="md-nav__link">
    Baseline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-empty-string" title="The empty string" class="md-nav__link">
    The empty string
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-vs-server-side-lua-scripting" title="Comparison vs. server-side Lua scripting" class="md-nav__link">
    Comparison vs. server-side Lua scripting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-and-getting-the-root" title="Setting and getting the root" class="md-nav__link">
    Setting and getting the root
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-and-getting-parts-of-objects" title="Setting and getting parts of objects" class="md-nav__link">
    Setting and getting parts of objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#even-more-charts" title="Even more charts" class="md-nav__link">
    Even more charts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raw-results" title="Raw results" class="md-nav__link">
    Raw results
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rejson-results" title="ReJSON results" class="md-nav__link">
    ReJSON results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lua-using-cjson" title="Lua using cjson" class="md-nav__link">
    Lua using cjson
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lua-using-cmsgpack" title="Lua using cmsgpack" class="md-nav__link">
    Lua using cmsgpack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/RedisLabsModules/ReJSON/edit/master/docs/performance.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">&para;</a></h1>
<p>To get an early sense of what ReJSON is capable of, you can test it with <code>redis-benchmark</code> just like
any other Redis command. However, in order to have more control over the tests, we'll use a 
a tool written in Go called <em>ReJSONBenchmark</em> that we expect to release in the near future.</p>
<p>The following figures were obtained from an AWS EC2 c4.8xlarge instance that ran both the Redis
server as well the as the benchmarking tool. Connections to the server are via the networking stack.
All tests are non-pipelined.</p>
<blockquote>
<p>NOTE: The results below are measured using the preview version of ReJSON, which is still very much
unoptimized.</p>
</blockquote>
<h2 id="rejson-baseline">ReJSON baseline<a class="headerlink" href="#rejson-baseline" title="Permanent link">&para;</a></h2>
<h3 id="a-smallish-object">A smallish object<a class="headerlink" href="#a-smallish-object" title="Permanent link">&para;</a></h3>
<p>We test a JSON value that, while purely synthetic, is interesting. The test subject is
<a href="https://github.com/RedisLabsModules/rejson/blob/master/test/files/pass-100.json">/test/files/pass-100.json</a>,
who weighs in at 380 bytes and is nested. We first test SETting it, then GETting it using several
different paths:</p>
<p><img alt="ReJSONBenchmark pass-100.json" src="../images/bench_pass_100.png" /></p>
<p><img alt="ReJSONBenchmark pass-100.json percentiles" src="../images/bench_pass_100_p.png" /></p>
<h3 id="a-bigger-array">A bigger array<a class="headerlink" href="#a-bigger-array" title="Permanent link">&para;</a></h3>
<p>Moving on to bigger values, we use the 1.4 kB array in
<a href="https://github.com/RedisLabsModules/rejson/blob/master/test/files/pass-jsonsl-1.json">/test/files/pass-jsonsl-1.json</a>:</p>
<p><img alt="ReJSONBenchmark pass-jsonsl-1.json" src="../images/bench_pass_jsonsl_1.png" /></p>
<p><img alt="ReJSONBenchmark pass-jsonsl-1.json percentiles" src="../images/bench_pass_jsonsl_1_p.png" /></p>
<h3 id="a-largish-object">A largish object<a class="headerlink" href="#a-largish-object" title="Permanent link">&para;</a></h3>
<p>More of the same to wrap up, now we'll take on a behemoth of no less than 3.5 kB as given by
<a href="https://github.com/RedisLabsModules/rejson/blob/master/test/files/pass-json-parser-0000.json">/test/files/pass-json-parser-0000.json</a>:</p>
<p><img alt="ReJSONBenchmark pass-json-parser-0000.json" src="../images/bench_pass_json_parser_0000.png" /></p>
<p><img alt="ReJSONBenchmark pass-json-parser-0000.json percentiles" src="../images/bench_pass_json_parser_0000_p.png" /></p>
<h3 id="number-operations">Number operations<a class="headerlink" href="#number-operations" title="Permanent link">&para;</a></h3>
<p>Last but not least, some adding and multiplying:</p>
<p><img alt="ReJSONBenchmark number operations" src="../images/bench_numbers.png" /></p>
<p><img alt="ReJSONBenchmark number operations percentiles" src="../images/bench_numbers_p.png" /></p>
<h3 id="baseline">Baseline<a class="headerlink" href="#baseline" title="Permanent link">&para;</a></h3>
<p>To establish a baseline, we'll use the Redis <a href="https://redis.io/commands/ping"><code>PING</code></a> command.
First, lets see what <code>redis-benchmark</code> reports:</p>
<div class="codehilite"><pre><span></span>~$ redis/src/redis-benchmark -n 1000000 ping
====== ping ======
  1000000 requests completed in 7.11 seconds
  50 parallel clients
  3 bytes payload
  keep alive: 1

99.99% &lt;= 1 milliseconds
100.00% &lt;= 1 milliseconds
140587.66 requests per second
</pre></div>


<p>ReJSONBenchmark's concurrency is configurable, so we'll test a few settings to find a good one. Here
are the results, which indicate that 16 workers yield the best throughput:</p>
<p><img alt="ReJSONBenchmark PING" src="../images/bench_ping.png" /></p>
<p><img alt="ReJSONBenchmark PING percentiles" src="../images/bench_ping_p.png" /></p>
<p>Note how our benchmarking tool does slightly worse in PINGing - producing only 116K ops, compared to
<code>redis-cli</code>'s 140K.</p>
<h3 id="the-empty-string">The empty string<a class="headerlink" href="#the-empty-string" title="Permanent link">&para;</a></h3>
<p>Another ReJSON benchmark is that of setting and getting an empty string - a value that's only two
bytes long (i.e. <code>""</code>). Granted, that's not very useful, but it teaches us something about the basic
performance of the module:</p>
<p><img alt="ReJSONBenchmark empty string" src="../images/bench_empty_string.png" /></p>
<p><img alt="ReJSONBenchmark empty string percentiles" src="../images/bench_empty_string_p.png" /></p>
<h2 id="comparison-vs-server-side-lua-scripting">Comparison vs. server-side Lua scripting<a class="headerlink" href="#comparison-vs-server-side-lua-scripting" title="Permanent link">&para;</a></h2>
<p>We compare ReJSON's performance with Redis' embedded Lua engine. For this purpose, we use the Lua
scripts at <a href="https://github.com/RedisLabsModules/rejson/tree/master/benchmarks/lua">/benchmarks/lua</a>.
These scripts provide ReJSON's GET and SET functionality on values stored in JSON or MessagePack
formats. Each of the different operations (set root, get root, set path and get path) is executed
with each "engine" on objects of varying sizes. </p>
<h3 id="setting-and-getting-the-root">Setting and getting the root<a class="headerlink" href="#setting-and-getting-the-root" title="Permanent link">&para;</a></h3>
<p>Storing raw JSON performs best in this test, but that isn't really surprising as all it does is
serve unprocessed strings. While you can and should use Redis for caching opaque data, and JSON
"blobs" are just one example, this does not allow any updates other than these of the entire value.</p>
<p>A more meaningful comparison therefore is between ReJSON and the MessagePack variant, since both
process the incoming JSON value before actually storing it. While the rates and latencies of these 
two behave in a very similar way, the absolute measurements suggest that ReJSON's performance may be
further improved.</p>
<p><img alt="VS. Lua set root" src="../images/bench_lua_set_root.png" /></p>
<p><img alt="VS. Lua set root latency" src="../images/bench_lua_set_root_l.png" /></p>
<p><img alt="VS. Lua get root" src="../images/bench_lua_get_root.png" /></p>
<p><img alt="VS. Lua get root latency" src="../images/bench_lua_get_root_l.png" /></p>
<h3 id="setting-and-getting-parts-of-objects">Setting and getting parts of objects<a class="headerlink" href="#setting-and-getting-parts-of-objects" title="Permanent link">&para;</a></h3>
<p>This test shows why ReJSON exists. Not only does it outperform the Lua variants, it retains constant
rates and latencies regardless the object's overall size. There's no magic here - ReJSON keeps the
value deserialized so that accessing parts of it is a relatively inexpensive operation. In deep contrast
are both raw JSON as well as MessagePack, which require decoding the entire object before anything can
be done with it (a process that becomes more expensive the larger the object is).</p>
<p><img alt="VS. Lua set path to scalar" src="../images/bench_lua_set_path.png" /></p>
<p><img alt="VS. Lua set path to scalar latency" src="../images/bench_lua_set_path_l.png" /></p>
<p><img alt="VS. Lua get scalar from path" src="../images/bench_lua_get_path.png" /></p>
<p><img alt="VS. Lua get scalar from path latency" src="../images/bench_lua_get_path_l.png" /></p>
<h3 id="even-more-charts">Even more charts<a class="headerlink" href="#even-more-charts" title="Permanent link">&para;</a></h3>
<p>These charts are more of the same but independent for each file (value):</p>
<p><img alt="VS. Lua pass-100.json rate" src="../images/bench_lua_pass_100.png" /></p>
<p><img alt="VS. Lua pass-100.json average latency" src="../images/bench_lua_pass_100_l.png" /></p>
<p><img alt="VS. Lua pass-jsonsl-1.json rate" src="../images/bench_lua_pass_jsonsl_1.png" /></p>
<p><img alt="VS. Lua pass-jsonsl-1.json average latency" src="../images/bench_lua_pass_jsonsl_1_l.png" /></p>
<p><img alt="VS. Lua pass-json-parser-0000.json rate" src="../images/bench_lua_pass_json_parser_0000.png" /></p>
<p><img alt="VS. Lua pass-json-parser-0000.json latency" src="../images/bench_lua_pass_json_parser_0000_l.png" /></p>
<p><img alt="VS. Lua pass-jsonsl-yahoo2.json rate" src="../images/bench_lua_pass_jsonsl_yahoo2.png" /></p>
<p><img alt="VS. Lua pass-jsonsl-yahoo2.json latency" src="../images/bench_lua_pass_jsonsl_yahoo2_l.png" /></p>
<p><img alt="VS. Lua pass-jsonsl-yelp.json rate" src="../images/bench_lua_pass_jsonsl_yelp.png" /></p>
<p><img alt="VS. Lua pass-jsonsl-yelp.json latency" src="../images/bench_lua_pass_jsonsl_yelp_l.png" /></p>
<h2 id="raw-results">Raw results<a class="headerlink" href="#raw-results" title="Permanent link">&para;</a></h2>
<p>The following are the raw results from the benchmark in CSV format.</p>
<h3 id="rejson-results">ReJSON results<a class="headerlink" href="#rejson-results" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>title,concurrency,rate,average latency,50.00%-tile,90.00%-tile,95.00%-tile,99.00%-tile,99.50%-tile,100.00%-tile
[ping],1,22128.12,0.04,0.04,0.04,0.05,0.05,0.05,1.83
[ping],2,54641.13,0.04,0.03,0.05,0.05,0.06,0.07,2.14
[ping],4,76000.18,0.05,0.05,0.07,0.07,0.09,0.10,2.10
[ping],8,106750.99,0.07,0.07,0.10,0.11,0.14,0.16,2.99
[ping],12,111297.33,0.11,0.10,0.15,0.16,0.20,0.22,6.81
[ping],16,116292.19,0.14,0.13,0.19,0.21,0.27,0.33,7.50
[ping],20,110622.82,0.18,0.17,0.24,0.27,0.38,0.47,12.21
[ping],24,107468.51,0.22,0.20,0.31,0.38,0.58,0.71,13.86
[ping],28,102827.35,0.27,0.25,0.38,0.44,0.66,0.79,12.87
[ping],32,105733.51,0.30,0.28,0.42,0.50,0.79,0.97,10.56
[ping],36,102046.43,0.35,0.33,0.48,0.56,0.90,1.13,14.66
JSON.SET {key} . {empty string size: 2 B},16,80276.63,0.20,0.18,0.28,0.32,0.41,0.45,6.48
JSON.GET {key} .,16,92191.23,0.17,0.16,0.24,0.27,0.34,0.38,9.80
JSON.SET {key} . {pass-100.json size: 380 B},16,41512.77,0.38,0.35,0.50,0.62,0.81,0.86,9.56
JSON.GET {key} .,16,48374.10,0.33,0.29,0.47,0.56,0.72,0.79,9.36
JSON.GET {key} sclr,16,94801.23,0.17,0.15,0.24,0.27,0.35,0.39,13.21
JSON.SET {key} sclr 1,16,82032.08,0.19,0.18,0.27,0.31,0.40,0.44,8.97
JSON.GET {key} sub_doc,16,81633.51,0.19,0.18,0.27,0.32,0.43,0.49,9.88
JSON.GET {key} sub_doc.sclr,16,95052.35,0.17,0.15,0.24,0.27,0.35,0.39,7.39
JSON.GET {key} array_of_docs,16,68223.05,0.23,0.22,0.29,0.31,0.44,0.50,8.84
JSON.GET {key} array_of_docs[1],16,76390.57,0.21,0.19,0.30,0.34,0.44,0.49,9.99
JSON.GET {key} array_of_docs[1].sclr,16,90202.13,0.18,0.16,0.25,0.29,0.36,0.39,7.87
JSON.SET {key} . {pass-jsonsl-1.json size: 1.4 kB},16,16117.11,0.99,0.91,1.22,1.55,2.17,2.35,9.27
JSON.GET {key} .,16,15193.51,1.05,0.94,1.41,1.75,2.33,2.42,7.19
JSON.GET {key} [0],16,78198.90,0.20,0.19,0.29,0.33,0.42,0.47,10.87
&quot;JSON.SET {key} [0] &quot;&quot;foo&quot;&quot;&quot;,16,80156.90,0.20,0.18,0.28,0.32,0.40,0.44,12.03
JSON.GET {key} [7],16,99013.98,0.16,0.15,0.23,0.26,0.34,0.38,7.67
JSON.GET {key} [8].zero,16,90562.19,0.17,0.16,0.25,0.28,0.35,0.38,7.03
JSON.SET {key} . {pass-json-parser-0000.json size: 3.5 kB},16,14239.25,1.12,1.06,1.21,1.48,2.35,2.59,11.91
JSON.GET {key} .,16,8366.31,1.91,1.86,2.00,2.04,2.92,3.51,12.92
&quot;JSON.GET {key} [&quot;&quot;web-app&quot;&quot;].servlet&quot;,16,9339.90,1.71,1.68,1.74,1.78,2.68,3.26,10.47
&quot;JSON.GET {key} [&quot;&quot;web-app&quot;&quot;].servlet[0]&quot;,16,13374.88,1.19,1.07,1.54,1.95,2.69,2.82,12.15
&quot;JSON.GET {key} [&quot;&quot;web-app&quot;&quot;].servlet[0][&quot;&quot;servlet-name&quot;&quot;]&quot;,16,81267.36,0.20,0.18,0.28,0.31,0.38,0.42,9.67
&quot;JSON.SET {key} [&quot;&quot;web-app&quot;&quot;].servlet[0][&quot;&quot;servlet-name&quot;&quot;] &quot;&quot;bar&quot;&quot;&quot;,16,79955.04,0.20,0.18,0.27,0.33,0.42,0.46,6.72
JSON.SET {key} . {pass-jsonsl.yahoo2-json size: 18 kB},16,3394.07,4.71,4.62,4.72,4.79,7.35,9.03,17.78
JSON.GET {key} .,16,891.46,17.92,17.33,17.56,20.12,31.77,42.87,66.64
JSON.SET {key} ResultSet.totalResultsAvailable 1,16,75513.03,0.21,0.19,0.30,0.34,0.42,0.46,9.21
JSON.GET {key} ResultSet.totalResultsAvailable,16,91202.84,0.17,0.16,0.24,0.28,0.35,0.38,5.30
JSON.SET {key} . {pass-jsonsl-yelp.json size: 40 kB},16,1624.86,9.84,9.67,9.86,9.94,15.86,19.36,31.94
JSON.GET {key} .,16,442.55,36.08,35.62,37.78,38.14,55.23,81.33,88.40
JSON.SET {key} message.code 1,16,77677.25,0.20,0.19,0.28,0.33,0.42,0.45,11.07
JSON.GET {key} message.code,16,89206.61,0.18,0.16,0.25,0.28,0.36,0.39,8.60
[JSON.SET num . 0],16,84498.21,0.19,0.17,0.26,0.30,0.39,0.43,8.08
[JSON.NUMINCRBY num . 1],16,78640.20,0.20,0.18,0.28,0.33,0.44,0.48,11.05
[JSON.NUMMULTBY num . 2],16,77170.85,0.21,0.19,0.28,0.33,0.43,0.47,6.85
</pre></div>


<h3 id="lua-using-cjson">Lua using cjson<a class="headerlink" href="#lua-using-cjson" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>json-set-root.lua empty string,16,86817.84,0.18,0.17,0.26,0.31,0.39,0.42,9.36
json-get-root.lua,16,90795.08,0.17,0.16,0.25,0.28,0.36,0.39,8.75
json-set-root.lua pass-100.json,16,84190.26,0.19,0.17,0.27,0.30,0.38,0.41,12.00
json-get-root.lua,16,87170.45,0.18,0.17,0.26,0.29,0.38,0.45,9.81
json-get-path.lua sclr,16,54556.80,0.29,0.28,0.35,0.38,0.57,0.64,7.53
json-set-path.lua sclr 1,16,35907.30,0.44,0.42,0.53,0.67,0.93,1.00,8.57
json-get-path.lua sub_doc,16,51158.84,0.31,0.30,0.36,0.39,0.50,0.62,7.22
json-get-path.lua sub_doc sclr,16,51054.47,0.31,0.29,0.39,0.47,0.66,0.74,7.43
json-get-path.lua array_of_docs,16,39103.77,0.41,0.37,0.57,0.68,0.87,0.94,8.02
json-get-path.lua array_of_docs 1,16,45811.31,0.35,0.32,0.45,0.56,0.77,0.83,8.17
json-get-path.lua array_of_docs 1 sclr,16,47346.83,0.34,0.31,0.44,0.54,0.72,0.79,8.07
json-set-root.lua pass-jsonsl-1.json,16,82100.90,0.19,0.18,0.28,0.31,0.39,0.43,12.43
json-get-root.lua,16,77922.14,0.20,0.18,0.30,0.34,0.66,0.86,8.71
json-get-path.lua 0,16,38162.83,0.42,0.40,0.49,0.59,0.88,0.96,6.16
&quot;json-set-path.lua 0 &quot;&quot;foo&quot;&quot;&quot;,16,21205.52,0.75,0.70,0.84,1.07,1.60,1.74,5.77
json-get-path.lua 7,16,37254.89,0.43,0.39,0.55,0.69,0.92,0.98,10.24
json-get-path.lua 8 zero,16,33772.43,0.47,0.43,0.63,0.77,1.01,1.09,7.89
json-set-root.lua pass-json-parser-0000.json,16,76314.18,0.21,0.19,0.29,0.33,0.41,0.44,8.16
json-get-root.lua,16,65177.87,0.24,0.21,0.35,0.42,0.89,1.01,9.02
json-get-path.lua web-app servlet,16,15938.62,1.00,0.88,1.45,1.71,2.11,2.20,8.07
json-get-path.lua web-app servlet 0,16,19469.27,0.82,0.78,0.90,1.07,1.67,1.84,7.59
json-get-path.lua web-app servlet 0 servlet-name,16,24694.26,0.65,0.63,0.71,0.74,1.07,1.31,8.60
&quot;json-set-path.lua web-app servlet 0 servlet-name &quot;&quot;bar&quot;&quot;&quot;,16,16555.74,0.96,0.92,1.05,1.25,1.98,2.20,9.08
json-set-root.lua pass-jsonsl-yahoo2.json,16,47544.65,0.33,0.31,0.41,0.47,0.59,0.64,10.52
json-get-root.lua,16,25369.92,0.63,0.57,0.91,1.05,1.37,1.56,9.95
json-set-path.lua ResultSet totalResultsAvailable 1,16,5077.32,3.15,3.09,3.20,3.24,5.12,6.26,14.98
json-get-path.lua ResultSet totalResultsAvailable,16,7652.56,2.09,2.05,2.13,2.17,3.23,3.95,9.65
json-set-root.lua pass-jsonsl-yelp.json,16,29575.20,0.54,0.52,0.64,0.75,0.94,1.00,12.66
json-get-root.lua,16,18424.29,0.87,0.84,1.25,1.40,1.82,1.95,7.35
json-set-path.lua message code 1,16,2251.07,7.10,6.98,7.14,7.22,11.00,12.79,21.14
json-get-path.lua message code,16,3380.72,4.73,4.44,5.03,6.82,10.28,11.06,14.93
</pre></div>


<h3 id="lua-using-cmsgpack">Lua using cmsgpack<a class="headerlink" href="#lua-using-cmsgpack" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>msgpack-set-root.lua empty string,16,82592.66,0.19,0.18,0.27,0.31,0.38,0.42,10.18
msgpack-get-root.lua,16,89561.41,0.18,0.16,0.25,0.29,0.37,0.40,9.52
msgpack-set-root.lua pass-100.json,16,44326.47,0.36,0.34,0.43,0.54,0.78,0.86,6.45
msgpack-get-root.lua,16,41036.58,0.39,0.36,0.51,0.62,0.84,0.91,7.21
msgpack-get-path.lua sclr,16,55845.56,0.28,0.26,0.36,0.44,0.64,0.70,11.29
msgpack-set-path.lua sclr 1,16,43608.26,0.37,0.34,0.47,0.58,0.78,0.85,10.27
msgpack-get-path.lua sub_doc,16,50153.07,0.32,0.29,0.41,0.50,0.69,0.75,8.56
msgpack-get-path.lua sub_doc sclr,16,54016.35,0.29,0.27,0.38,0.46,0.62,0.67,6.38
msgpack-get-path.lua array_of_docs,16,45394.79,0.35,0.32,0.45,0.56,0.78,0.85,11.88
msgpack-get-path.lua array_of_docs 1,16,48336.48,0.33,0.30,0.42,0.52,0.71,0.76,7.69
msgpack-get-path.lua array_of_docs 1 sclr,16,53689.41,0.30,0.27,0.38,0.46,0.64,0.69,11.16
msgpack-set-root.lua pass-jsonsl-1.json,16,28956.94,0.55,0.51,0.65,0.82,1.17,1.26,8.39
msgpack-get-root.lua,16,26045.44,0.61,0.58,0.68,0.83,1.28,1.42,8.56
&quot;msgpack-set-path.lua 0 &quot;&quot;foo&quot;&quot;&quot;,16,29813.56,0.53,0.49,0.67,0.83,1.15,1.22,6.82
msgpack-get-path.lua 0,16,44827.58,0.36,0.32,0.48,0.58,0.76,0.81,9.19
msgpack-get-path.lua 7,16,47529.14,0.33,0.31,0.42,0.53,0.73,0.79,7.47
msgpack-get-path.lua 8 zero,16,44442.72,0.36,0.33,0.45,0.56,0.77,0.85,8.11
msgpack-set-root.lua pass-json-parser-0000.json,16,19585.82,0.81,0.78,0.85,1.05,1.66,1.86,4.33
msgpack-get-root.lua,16,19014.08,0.84,0.73,1.23,1.45,1.76,1.84,13.52
msgpack-get-path.lua web-app servlet,16,18992.61,0.84,0.73,1.23,1.45,1.75,1.82,8.19
msgpack-get-path.lua web-app servlet 0,16,24328.78,0.66,0.64,0.73,0.77,1.15,1.34,8.81
msgpack-get-path.lua web-app servlet 0 servlet-name,16,31012.81,0.51,0.49,0.57,0.65,1.02,1.13,8.11
&quot;msgpack-set-path.lua web-app servlet 0 servlet-name &quot;&quot;bar&quot;&quot;&quot;,16,20388.54,0.78,0.73,0.88,1.08,1.63,1.78,7.22
msgpack-set-root.lua pass-jsonsl-yahoo2.json,16,5597.60,2.85,2.81,2.89,2.94,4.57,5.59,10.19
msgpack-get-root.lua,16,6585.01,2.43,2.39,2.52,2.66,3.76,4.80,10.59
msgpack-set-path.lua ResultSet totalResultsAvailable 1,16,6666.95,2.40,2.35,2.43,2.47,3.78,4.59,12.08
msgpack-get-path.lua ResultSet totalResultsAvailable,16,10733.03,1.49,1.45,1.60,1.66,2.36,2.93,13.15
msgpack-set-root-lua pass-jsonsl-yelp.json,16,2291.53,6.97,6.87,7.01,7.12,10.54,12.89,21.75
msgpack-get-root.lua,16,2889.59,5.53,5.45,5.71,5.86,8.80,10.48,25.55
msgpack-set-path.lua message code 1,16,2847.85,5.61,5.44,5.56,6.01,10.58,11.90,16.91
msgpack-get-path.lua message code,16,5030.95,3.18,3.07,3.24,3.57,6.08,6.92,12.44
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../path/" title="Path syntax" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Path syntax
              </span>
            </div>
          </a>
        
        
          <a href="../ram/" title="RAM usage" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                RAM usage
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-92003007-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>